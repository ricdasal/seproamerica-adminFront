
<h1 class="titulo">Datos Registro</h1>
<section class="vh-100 bg-image fondo">
  
        <div class="container-datos">
          <div class=" fondo-datos" style="border-radius: 15px;">
            <div class=" p-5">
              <div id="img-perfil">
                <img  src="../../assets/Iconos/app sepro vectores-82.png" alt="">
              </div>
              <!--h2 class="text-uppercase text-center mb-5">Datos de registro</h2-->

              <form id="demoForm" class="needs-validation" [formGroup]="registerForm" autocomplete="on" (ngSubmit)="registerForm.valid && onRegisterSubmit()" novalidate>

                <div class="form-outline mb-4">
                  <label class="form-label" for="form3Example1cg">Apellidos</label>
                  <input type="text" id="form3Example1cg" matInput class="form-control form-control-lg" required
                  formControlName="apellidos"
                  [(ngModel)]="user.apellidos" 
                  />
                  <mat-error *ngIf="registerForm.controls['apellidos'].errors?.['required']"> *</mat-error>
                  <mat-error *ngIf="registerForm.controls['apellidos'].errors?.['pattern']"> Solo insertar letras</mat-error>
                </div>

                <div class="form-outline mb-4">
                  <label class="form-label" for="form3Example2cg">Nombres</label>
                  <input type="text" id="form3Example2cg" class="form-control form-control-lg" 
                  formControlName="nombres"
                  [(ngModel)]="user.nombres"
                  />
                  <mat-error *ngIf="registerForm.controls['nombres'].errors?.['required']"> *</mat-error>
                  <mat-error *ngIf="registerForm.controls['nombres'].errors?.['pattern']"> Solo insertar letras</mat-error>
                </div>

                <div class="form-outline mb-4">
                  <label class="form-label" for="form3Example3cg">Cedula</label>
                  <input maxlength="10" type="text" id="form3Example3cg" class="form-control form-control-lg" 
                  formControlName="cedula"
                  [(ngModel)]="user.cedula"
                  />
                  <mat-error *ngIf="registerForm.controls['cedula'].errors?.['required']"> *</mat-error><br>
                  <mat-error *ngIf="registerForm.controls['cedula'].errors?.['minlength']"> Su cédula debe tener 10 dígitos</mat-error><br>
                  <mat-error *ngIf="registerForm.controls['cedula'].errors?.['pattern']"> Su cédula solo debe contener digitos</mat-error><br>

                </div>
                

                <div class="form-outline mb-4">
                  <label class="form-label" for="form3Example4cg">Fecha de Nacimiento</label>
                  <input type="date" id="form3Example4cg" class="form-control form-control-lg" 
                  formControlName="fechaNac"
                  [(ngModel)]="user.fechaNac" required validarFecha
                  />
                  <mat-error *ngIf="validacionFecha(user.fechaNac)">
                    Debe ser mayor de 18 años
                  </mat-error>
                </div>
                

                <label class="form-label" for="form3Example1cg">Sexo</label>
                <div class="form-outline mb-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" formControlName="sexo" [(ngModel)]="user.sexo" 
                      id="gridRadios1" value="M">
                      <label class="form-check-label" for="gridRadios1">
                        Masculino
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" formControlName="sexo" [(ngModel)]="user.sexo" 
                      id="gridRadios2" value="F">
                      <label class="form-check-label" for="gridRadios2">
                        Femenino
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" formControlName="sexo" [(ngModel)]="user.sexo" 
                      id="gridRadios3" value="Nd">
                      <label class="form-check-label" for="gridRadios3">
                        No definir
                      </label>
                    </div>
                  <mat-error *ngIf="registerForm.controls['sexo'].errors?.['required']"> *</mat-error>
                </div>


                <div class="form-outline mb-4">
                  <label class="form-label" for="form3Example6cg">Correo</label>
                  <input type="email" id="form3Example6cg" class="form-control form-control-lg" 
                  formControlName="correo"
                  [(ngModel)]="user.correo"
                  />
                  <mat-error *ngIf="registerForm.controls['correo'].errors?.['required']"> *</mat-error>
                  <mat-error *ngIf="registerForm.controls['correo'].errors?.['pattern']"> Debe contener una extensión válida</mat-error>
                  <!--<mat-error *ngIf="registerForm.controls['correo'].errors?.['email']"> Correo no válido</mat-error>-->
                  

                </div>

                <div class="form-outline mb-4">
                  <label class="form-label" for="form3Example7cg">Telefono</label>
                  <input 
                  maxlength="10"
                  type="tel"
                   id="form3Example7cg" 
                   class="form-control form-control-lg" 
                  formControlName="telefono"
                  [(ngModel)]="user.telefono"
                  />
                  <mat-error *ngIf="registerForm.controls['telefono'].errors?.['required']"> *</mat-error>
                  <mat-error *ngIf="registerForm.controls['telefono'].errors?.['pattern']"> Su telefono debe comenzar con 09 y tener como máximo 10 dígitos</mat-error>
                  <mat-error *ngIf="registerForm.controls['telefono'].errors?.['minlength']"> Minimo 9 caracteres</mat-error>
                  <mat-error *ngIf="registerForm.controls['telefono'].errors?.['maxlength']"> Maximo 10 caracteres</mat-error>
                </div>

                  
                <label class="form-label" for="form3Example8cg">Contraseña</label>

                <div class="form-outline form-white mb-4 input-group ">

                  <span class="input-group-text" id="basic-addon1">
                    <mat-icon matPrefix (click)="hide = !hide">
                      {{hide ? 'visibility' : 'visibility_off'}}
                    </mat-icon>
                  </span>
        
                  <input 
                  type="password" 
                  id="form3Example8cg" 
                  class="form-control form-control-lg" 
                  formControlName="contrasenha"
                  placeholder="Ingrese contraseña..."
                    [(ngModel)]="user.contrasenia" [type]="hide? 'password':'text'" />

                </div>
                <mat-error *ngIf="registerForm.controls['contrasenha'].errors?.['minlength']"> Minimo 8 caracteres</mat-error><br>


                <div class="text-center">
                  <div class="form-check d-flex justify-content-center ">
                    <input class="form-check-input me-2" type="checkbox" value="" id="invalidCheck" (click)="validarTerminosyCondiciones()" name="invalidCheck" required/>
                    <label class="form-check-label" for="invalidCheck">
                      Acepto los <a href="#!" class="text-body"
                      data-bs-toggle="modal" data-bs-target="#staticBackdrop"><u>términos y condiciones del servicio</u></a>
                    </label>
                  </div> 
                  <mat-error  *ngIf="!terminosValidados">Debe aceptar los términos y condiciones para registrarse</mat-error>
                </div>
                


                <div class="d-flex justify-content-center">
                  <button mat-button type="submit button" data-bs-toggle="modal" data-bs-target="#modalDos" 
                  data-bs-dismiss="modal" id="botonRegistro" [disabled]="!esMayorEdad || !registerForm.valid || !terminosValidados"
                  class="btn-confirmar">Confirmar</button>
                </div>

                <!--Pantalla para confirmar registro-->
                <div class="modal fade" id="modalDos" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel mensajeDeConfirmacion">Crear cuenta con estos datos</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <h3 id="mensajeDeConfirmacionDos"></h3>
                      </div>
                      <div class="modal-footer">
                        <button type="button" (click)="guardarUsuario()" class="btn btn-primary" style="background-color:green;">Guardar</button>
                      </div>
                    </div>
                  </div>
                </div>

                <!--Pantalla de datos no guardados-->
                <ng-container *ngIf="submitted" >
                  <div *ngIf="submitted" class="modal fade" id="modalFallido" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h1 class="modal-title fs-5" id="staticBackdropLabel">Cuenta no creada</h1>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                      </div>
                    </div>
                  </div>
              </ng-container>

                <!---PAntalla de términos y condiciones -->
                <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-scrollable">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Términos y condiciones</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut in finibus lorem. Proin gravida nisi eget velit imperdiet, quis tincidunt purus condimentum. Aenean fermentum ex id metus faucibus eleifend. Donec massa risus, blandit nec sodales ut, convallis sit amet ligula. Nulla facilisi. Proin scelerisque nulla eros, vel posuere augue tincidunt quis. Vivamus molestie urna ut enim cursus interdum. Aenean vulputate arcu a sodales facilisis. Vestibulum non enim ac tortor finibus efficitur.

                          Quisque dictum consectetur enim, tristique pharetra ante convallis et. Vestibulum auctor ligula arcu, eget tincidunt ligula efficitur vel. Nunc eleifend urna et tempus ultricies. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vivamus malesuada ut mauris at pretium. Pellentesque commodo eros nec finibus consectetur. Nunc et tristique magna. Sed vitae urna non urna facilisis ornare. Pellentesque non ullamcorper nulla. Quisque vel tortor convallis, convallis lectus eget, euismod dolor. Nullam purus turpis, facilisis et turpis eget, semper venenatis nulla. In ac vulputate sem, sed tincidunt nisl. Nunc nec neque eget nisi faucibus sollicitudin quis vitae tellus. Aliquam volutpat et magna eu bibendum. In congue, velit quis hendrerit rhoncus, erat neque iaculis sem, sed laoreet purus libero sit amet dolor.
                          
                          Proin turpis mauris, vestibulum eu malesuada vitae, facilisis sit amet magna. Proin dapibus arcu velit, ut bibendum nisi euismod feugiat. Maecenas dictum mauris sed finibus molestie. Donec facilisis, lorem ut venenatis elementum, quam eros vestibulum dui, non tristique dolor nulla eu turpis. Curabitur laoreet sapien arcu, ut fermentum est molestie ut. Nam tincidunt suscipit magna et semper. Aliquam consequat dolor at ante consectetur, eget venenatis massa posuere. Aliquam egestas eros pulvinar porta consequat. Nam vestibulum efficitur neque, et viverra dui scelerisque non. Quisque massa tortor, sollicitudin a leo at, accumsan imperdiet dui. Pellentesque eget nisi convallis arcu accumsan pharetra non lacinia nibh. Suspendisse convallis enim euismod euismod molestie.
                          
                          Praesent sit amet ipsum nec libero convallis convallis ut eu urna. Aenean ante tortor, tempor et nisi sit amet, maximus consectetur neque. Duis gravida interdum ligula eu rutrum. Integer vitae nulla id dolor consectetur pretium eleifend a ipsum. Phasellus sed leo enim. Aliquam eu turpis nec dui accumsan faucibus. Nulla non malesuada risus, quis blandit justo. Cras sit amet elementum tortor. Aenean nec egestas metus. Ut massa arcu, consectetur non suscipit vel, vestibulum in velit. Curabitur fringilla auctor nunc, vitae bibendum urna rutrum at. Nam bibendum leo ut dolor egestas, eu lacinia neque pharetra. Cras quis ipsum eget nisl scelerisque lacinia. Donec congue massa eros, at ullamcorper dolor interdum id. Sed aliquam mauris nec purus consequat interdum a at urna.
                          
                          Nullam tincidunt orci ac commodo luctus. Donec hendrerit id nulla vitae interdum. Nullam arcu felis, maximus eu turpis nec, ultricies congue quam. Nam finibus tellus gravida congue fringilla. Praesent faucibus nulla ante, et sagittis felis semper vel. Aenean auctor lacus et sapien porta, tempor cursus risus aliquam. Mauris sit amet pellentesque neque. Maecenas ultrices arcu vel tellus tempus interdum.</p>
                      </div>
                    </div>
                  </div>
                </div> 

                <p class="text-center text-muted mt-5 mb-0">¿Ya tiene una cuenta? <a mat-button href="#!"
                    class="fw-bold text-body" routerLink="/login"><u>Inicie sesión aquí</u></a></p>

              </form>

            </div>
          </div>
        </div>
      
</section>